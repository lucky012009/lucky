function writeWeeklyRankings(rankings,sponsor){var change=0;var url='';document.write('<table class=bio border=0 cellpadding=0 cellspacing=0 width=228>'+'<tr>'+'<th colspan=4>WEEKLY RANKINGS</th>'+'</tr>'+'<tr>'+'<td colspan=4>');if(sponsor.CRL=='head'){document.write('<div style="float: left; margin-left: -2px; margin-top: 0px; margin-bottom: 0px; padding-right: 2px;"><a href="http://www.head.com/tennis/" target="_blank" data-action="Profile - Logo"><img src="/img/sponsors/head/head_69x14.gif" width=69 height=14 border=0></a></div>');}else if(sponsor.CRL=='babolat'){document.write('<div style="float: left; padding-right: 3px; padding-top: 3px;"><a href="http://www.babolat.com/#/tennis/us" target="_blank" data-action="Profile - Logo"><img src="/img/babolat/text_53x8.gif" width=53 height=8 border=0></a></div>');}document.write('Recruiting&nbsp;Lists'+'</td>'+'</tr>');document.write('<tr>'+'<td colspan=2 width="70%">&nbsp;&nbsp;National:</td>');if(rankings.crl.rank>0){if(rankings.crl.url.length>0){document.write('<td width="5%"><a href="'+rankings.crl.url+'">'+rankings.crl.rank+'</a></td>');}else{document.write('<td width="5%">'+rankings.crl.rank+'</td>');}if(rankings.crl.prior>0){change=rankings.crl.prior-rankings.crl.rank;if(change>0){document.write('<td align=center><img src="/img/arrow_up.gif" width=12 height=13 alt="Up from '+rankings.crl.prior+'" title="Up from '+rankings.crl.prior+'"></td>');}else if(change<0){document.write('<td align=center><img src="/img/arrow_down.gif" width=12 height=13 alt="Down from '+rankings.crl.prior+'" title="Down from '+rankings.crl.prior+'"></td>');}else{document.write('<td width="25%">&nbsp;</td>');}}else{document.write('<td width="25%">&nbsp;</td>');}}else{document.write('<td width="5%">NR</td>'+'<td width="25%">&nbsp;</td>');}document.write('</tr>');if(rankings.region.rank>0){document.write('<tr>'+'<td colspan=2>&nbsp;&nbsp;'+rankings.region.name+':</td>');if(rankings.region.url.length>0){document.write('<td><a href="'+rankings.region.url+'">'+rankings.region.rank+'</a></td>');}else{document.write('<td>'+rankings.region.rank+'</td>');}document.write('<td>&nbsp;</td>'+'</tr>');}if(rankings.state.rank>0){document.write('<tr>'+'<td colspan=2>&nbsp;&nbsp;'+rankings.state.name+':</td>');if(rankings.state.url.length>0){document.write('<td><a href="'+rankings.state.url+'">'+rankings.state.rank+'</a></td>');}else{document.write('<td>'+rankings.state.rank+'</td>');}document.write('<td>&nbsp;</td>'+'</tr>');}document.write('<tr>'+'<td colspan=2>');if(sponsor.RPI=='dunlop'){document.write('<div style="float: left; margin-left: 0px; margin-top: 2px; margin-bottom: 0px; padding-right: 4px;"><a href="http://www.DunlopSports.com" target="_blank" data-action="Profile - Logo"><img src="/img/sponsors/dunlop/text_70x8.png" width=70 height=8 border=0></a></div>RPI:</td>');}else{document.write('TennisRPI:</td>');}if(rankings.rpi.rank>0){if(rankings.rpi.url.length>0){document.write('<td><a href="'+rankings.rpi.url+'">'+rankings.rpi.rank+'</a></td>');}else{document.write('<td>'+rankings.rpi.rank+'</td>');}if(rankings.rpi.prior>0){change=rankings.rpi.prior-rankings.rpi.rank;if(change>0){document.write('<td align=center><img src="/img/arrow_up.gif" width=12 height=13 alt="Up from '+rankings.rpi.prior+'" title="Up from '+rankings.rpi.prior+'"></td>');}else if(change<0){document.write('<td align=center><img src="/img/arrow_down.gif" width=12 height=13 alt="Down from '+rankings.rpi.prior+'" title="Down from '+rankings.rpi.prior+'"></td>');}else{document.write('<td>&nbsp;</td>');}}else{document.write('<td>&nbsp;</td>');}document.write('</tr>'+'<tr>'+'<td colspan=2>&nbsp;&nbsp;Sched.&nbsp;Strength:</td>');if(rankings.rpi.sos.rank>0){if(rankings.rpi.sos.url.length>0){document.write('<td><a href="'+rankings.rpi.sos.url+'">'+rankings.rpi.sos.rank+'</a></td>');}else{document.write('<td>'+rankings.rpi.sos.rank+'</td>');}}else{document.write('<td>&mdash;</td>');}document.write('<td>&nbsp;</td>');}else{document.write('<td>NR</td>'+'<td>&nbsp;</td>');}document.write('</tr>');if((rankings.elo)&&(rankings.elo.rating>0)){document.write('<tr>'+'<td colspan=2>'+'<div style="float: left; margin-left: 0px; margin-top: -1px; margin-bottom: -1px; margin-left: -1px; padding-right: 3px;"><img src="/img/chess/16x16/black/knight_piece.png" width=16 height=16 border=0></a></div>'+'Elo Rating:'+'</td>'+'<td><a href="'+rankings.elo.url+'" target="_blank">'+rankings.elo.rating+'</a></td>'+'<td align=center>'+'<div style="margin-left: 0px; margin-top: -2px; margin-bottom: -2px;">'+'<img src="/img/chess/16x16/'+rankings.elo.class+'.png" width=16 height=16>'+'</td>'+'</tr>');}if((rankings.wtt)&&(rankings.wtt.rank>0)){document.write('<tr>'+'<td colspan=2>'+'<div style="float: left; margin-left: 1px; margin-top: -1px; margin-bottom: -2px; padding-right: 3px;"><a href="http://www.itftennis.com/procircuit" target="_blank" data-action="Profile - Logo"><img src="/img/links/wtt_19x15.png" width=19 height=15 border=0></a></div>'+'Pro Ranking:'+'</td>'+'<td><a href="'+rankings.wtt.url+'" target="_blank" data-action="Profile - Ranking">'+rankings.wtt.rank+'</a></td>');if(rankings.wtt.prior>0){change=rankings.wtt.prior-rankings.wtt.rank;if(change>0){document.write('<td align=center><img src="/img/arrow_up.gif" width=12 height=13 alt="Up from '+rankings.wtt.prior+'" title="Up from '+rankings.wtt.prior+'"></td>');}else if(change<0){document.write('<td align=center><img src="/img/arrow_down.gif" width=12 height=13 alt="Down from '+rankings.wtt.prior+'" title="Down from '+rankings.wtt.prior+'"></td>');}else{document.write('<td>&nbsp;</td>');}}else{document.write('<td>&nbsp;</td>');}document.write('</tr>');}if((rankings.itf)&&(rankings.itf.rank>0)&&(sponsor.ITF=='itf')){document.write('<tr>'+'<td colspan=2>'+'<div style="float: left; margin-left: 0px; margin-top: -1px; margin-bottom: -2px; padding-right: 3px;"><a href="http://www.itftennis.com/juniors" target="_blank" data-action="Profile - Logo"><img src="/img/links/itf_38x17.gif" width=38 height=17 border=0></a></div>'+'Jr. Ranking:'+'</td>'+'<td><a href="'+rankings.itf.url+'" target="_blank" data-action="Profile - Ranking">'+rankings.itf.rank+'</a></td>');if(rankings.itf.prior>0){change=rankings.itf.prior-rankings.itf.rank;if(change>0){document.write('<td align=center><img src="/img/arrow_up.gif" width=12 height=13 alt="Up from '+rankings.itf.prior+'" title="Up from '+rankings.itf.prior+'"></td>');}else if(change<0){document.write('<td align=center><img src="/img/arrow_down.gif" width=12 height=13 alt="Down from '+rankings.itf.prior+'" title="Down from '+rankings.itf.prior+'"></td>');}else{document.write('<td>&nbsp;</td>');}}else{document.write('<td>&nbsp;</td>');}document.write('</tr>');}if((rankings.usta)&&(rankings.usta.rank>0)&&(sponsor.USTA=='usta')){url='https:\/\/tennislink.usta.com/Tournaments/Rankings/RankingHome.aspx?Page=PlayerRecord&id='+rankings.usta.listid+'&p='+rankings.usta.pid+'&Type=searchresults#';if(rankings.usta.listid>100000000)url='https:\/\/www.usta.com/en/home/play/rankings/'+rankings.usta.division.replace('B','boys-').replace('G','girls-')+'-ranking.html';document.write('<tr>'+'<td colspan=2>'+'<div style="float: left; margin-left: 0px; padding-top: 1px; padding-bottom: 1px; padding-right: 2px;"><a href="http://www.usta.com" target="_blank" data-action="Profile - Logo"><img src="/img/links/usta_55x12.gif" style="padding-top: 1px;" width=55 height=12 border=0></a></div>'+'Standing:'+'</td>'+'<td><a href="'+url+'" target="_blank" data-action="Profile - Ranking">'+rankings.usta.rank+'</a></td>');if(rankings.usta.prior>0){change=rankings.usta.prior-rankings.usta.rank;if(change>0){document.write('<td align=center><img src="/img/arrow_up.gif" width=12 height=13 alt="Up from '+rankings.usta.prior+'" title="Up from '+rankings.usta.prior+'"></td>');}else if(change<0){document.write('<td align=center><img src="/img/arrow_down.gif" width=12 height=13 alt="Down from '+rankings.usta.prior+'" title="Down from '+rankings.usta.prior+'"></td>');}else{document.write('<td>&nbsp;</td>');}}else{document.write('<td>&nbsp;</td>');}document.write('</tr>');}if((rankings.utr)&&(rankings.utr.rating>0)&&(rankings.utr.reliability>0)){document.write('<tr>'+'<td colspan=2>'+'<div style="float: left; margin-left: 0px; margin-top: 0px; margin-bottom: -2px; padding-right: 3px;"><a href="http://www.universaltennis.com" target="_blank" data-action="Profile - Logo"><img src="/img/links/utr_43x12.png" width=43 height=12 border=0></a></div>'+'Rating:'+'</td>');if(rankings.utr.id==0){document.write('<td>'+rankings.utr.rating+'</td>');}else{document.write(['<td><a href="https:','/','/','app.myutr.com/profiles/',rankings.utr.id,'" target="_blank" data-action="Profile - Rating">',rankings.utr.rating,'</a></td>'].join(''));}document.write('<td>&nbsp;</td>'+'</tr>');}if((typeof rankings.hot100!=="undefined")&&(rankings.hot100.rank>0)){document.write('<tr>'+'<td colspan=2>');if(sponsor.Hot100=='lotto'){document.write('<div style="float: left; margin: 2px 2px 0 0;"><a href="http://lotto.sportlife.us/elite" target="_blank" data-action="Hot 100 Logo"><img src="/img/sponsors/lotto/lotto_65x11.png" width=65 height=11 border=0></a></div>');}else if(sponsor.Hot100=='prince'){document.write('<div style="float: left; margin-left: -1px; margin-top: -1px; margin-bottom: -1px; margin-right: -1px;"><a href="http://www.tennis-warehouse.com/Princeracquets.html?from=tenrec" target="_blank" data-action="Hot 100 Logo"><img src="/img/prince/logo_40x16.gif" width=40 height=16 border=0></a></div>');}else if(sponsor.Hot100=='playsight'){document.write('<div style="float: left; margin-left: -1px; margin-top: -1px; margin-bottom: -1px; margin-right: -1px;"><a href="http://www.playsight.com/" target="_blank" data-action="Hot 100 Logo"><img src="/img/sponsors/playsight/playsight_57x16.png" width=57 height=16 border=0></a></div>');}else{document.write('The');}document.write('&nbsp;Hot&nbsp;100:'+'</td>');if(rankings.hot100.url.length>0){document.write('<td><a href="'+rankings.hot100.url+'">'+rankings.hot100.rank+'</a></td>');}else{document.write('<td>'+rankings.hot100.rank+'</td>');}document.write('<td>&nbsp;</td>'+'</tr>');}if((rankings.otz)&&(rankings.otz.url!='')&&(sponsor.OTZ=='otz')){var rank=rankings.otz.rank;if(!(rank>0)){rank='NR';}document.write('<tr>'+'<td colspan=2>'+'<div style="float: left; margin-left: 0px; margin-top: 0px; margin-bottom: -1px; padding-right: 1px;"><a href="http://ohiotenniszone.com" target="_blank" data-action="Profile - Logo"><img src="/img/sponsors/otz/otz_logo_43x15.gif" width=43 height=15 border=0></a></div>'+'Ranking:'+'</td>'+'<td><a href="'+rankings.otz.url+'" target="_blank" data-action="Profile - Ranking">'+rank+'</a></td>'+'<td>&nbsp;</td>'+'</tr>');}document.write('</table>');}function writeRatingsWindow(ratings){var today=new Date().toJSON().slice(0,10);if(ratings.expires>=today){var rankings=ratings.rankings;document.write('<tr>'+'<td width=468 colspan=3>'+'<table class=bio border=1 cellpadding=0 cellspacing=0 width=468>'+'<tr>'+'<th colspan='+(rankings.length+2)+' class=doublewide>'+'<div style="float: right; margin-left: -2px; margin-top: 0px; margin-bottom: 0px; padding-right: 5px;"><a href="/article.asp?id=347109486"><img src="/img/icons/more_about_51x7.gif" width=51 height=7 border=0 hspace=4 vspace=2 /><img src="/img/icons/help_12x12.gif" width=12 height=12 border=0 /></a></div>'+ratings.title+' RATINGS WINDOW'+'</th>'+'</tr>'+'<tr bgcolor="#eeeeee">'+'<td align=right width="25px">&nbsp;Dates:&nbsp;</td>');for(i=0;i<rankings.length;i++){document.write('<td align=center>'+rankings[i].date+'</td>');}document.write('<td align=center>&nbsp;</td>'+'</tr>'+'<tr>'+'<td align=right width="25px">&nbsp;Ranking:&nbsp;</td>');for(i=0;i<rankings.length;i++){document.write('<td align=center>'+rankings[i].rank+'</td>');}document.write('<td align=center>&nbsp;</td>'+'</tr>'+'<tr bgcolor="#eeeeee">'+'<td colspan='+Math.round(rankings.length/2+0.9)+'>&nbsp;'+ratings.status+' Rating:&nbsp; '+ratings.prediction+'</td>'+'<td colspan='+Math.round(rankings.length/2)+' align=right>Rating Window: '+ratings.window+'</td>'+'<td align=center>&nbsp;</td>'+'</tr>'+'</table>'+'<img src="/ts.gif" width=1 height=16>'+'</td>'+'</tr>');}}function writeHighestRankings(highest,player){var y=0;var t='';var d=new Date();var today=new Date().toJSON().slice(0,10);document.write('<table class=bio border=0 cellpadding=0 cellspacing=0 width=228>'+'<tr>'+'<th colspan=4>HIGHEST RANKINGS</th>'+'</tr>');if(highest.length==0){document.write('<tr><td colspan=4><div style="padding: 10px 5px 10px 5px;">');if(typeof player=="undefined"){document.write('At present there is no historic ranking data for this player in the selected class');}else if(player.gender=='M'){document.write('At present there is no historic ranking data for '+player.first+' in the Boys&#39;&nbsp;Class&nbsp;of&nbsp;'+player.classof);}else if(player.gender=='F'){document.write('At present there is no historic ranking data for '+player.first+' in the Girls&#39;&nbsp;Class&nbsp;of&nbsp;'+player.classof);}else if(player.gender==''){document.write('At present there is no historic ranking data for this player in the selected class');}document.write('.</td></tr>');}else{for(i=0;i<highest.length;i++){if('date'in highest[i]){if((highest[i].date.slice(0,10)<=today)&&((y!=highest[i].year)||(t!=highest[i].type))){t=highest[i].type;d=new Date(highest[i].date);document.write('<tr>');if(y!=highest[i].year){y=highest[i].year;document.write('<td align=right width=110>'+y+'&nbsp;'+t+':</td>');}else{document.write('<td align=right>'+t+':</td>');}document.write('<td align=center>'+highest[i].rank+'</td>'+'<td>('+(d.getMonth()+1)+'/'+d.getDate()+')</td>'+'</tr>');}}else{t=highest[i].type;document.write('<tr>');if(y!=highest[i].year){y=highest[i].year;document.write('<td align=right width=110>'+y+'&nbsp;'+t+':</td>');}else{document.write('<td align=right>'+t+':</td>');}document.write('<td align=center>'+highest[i].rank+'</td>'+'<td>&nbsp;</td>'+'</tr>');}}}document.write('</table>');}function writeProfileVisits(visits,playerid){document.write('<tr>'+'<td width=468 colspan=3>'+'<img src="/ts.gif" width=1 height=16>'+'<table class=bio border=0 cellpadding=0 cellspacing=0 width=468>'+'<tr>'+'<th colspan=5 class=doublewide>VISITS TO YOUR PROFILE</th>'+'</tr>');if(true||su){document.write('<tr bgcolor="#eeeeee"><td colspan=5><div id="stats_message" style="font-size: 110%; padding: 4px; display: block; text-align: center; cursor: pointer" onclick="location.href=\'/player/stats.asp?id='+playerid+'\'">&nbsp;</div></td></tr>');document.write('<tr><td colspan=5><div id="stats_chart" style="padding: 8px 0 0 0; margin: 0; width: 100%; height: 100px;">&nbsp;</div></td></tr>');}else{document.write('<tr bgcolor="#eeeeee">'+'<td><i>&nbsp;</i></td>'+'<td><i>Yesterday</i></td>'+'<td align=center><i>Last Week</i></td>'+'<td align=center><i>Last Month</i></td>'+'<td align=center><i>All Time</i></td>'+'</tr>');for(i=0;i<visits.length;i++){document.write('<tr>'+'<td>'+visits[i].caption+'</td>'+'<td align=center>'+visits[i].yesterday+'</td>'+'<td align=center>'+visits[i].last_week+'</td>'+'<td align=center>'+visits[i].last_month+'</td>'+'<td align=center>'+visits[i].all_time+'</td>'+'</tr>');}}document.write('<tr bgcolor="#eeeeee">'+'<td colspan=5 align=center>'+'<div style="padding: 5px 5px 5px 5px;">View more detail about <a href="/player/stats.asp?id='+playerid+'">coaching visits</a> to your player profile.</div>'+'</td>'+'</tr>'+'</table>'+'</td>'+'</tr>');}var statsChart={title:null,chart:{type:'column'},legend:{enabled:false},credits:{enabled:false},tooltip:{shared:true},xAxis:{title:null,type:'datetime',labels:{format:'{value:%b %e}'}},yAxis:[{title:null,min:0,endOnTick:false,tickPixelInterval:30,minTickInterval:1,opposite:true}],plotOptions:{column:{grouping:false,shadow:false,pointPadding:-0.2,borderWidth:0,stacking:'normal'}},series:[{name:'Coach Visits',color:'rgba(255,204,77,1)',pointPlacement:0,animation:false,stack:'visits'},{name:'Player Visits',color:'rgba(0,122,255,0.7)',pointPlacement:0,animation:false,stack:'visits'},{name:'Other Visits',color:'rgba(0,122,255,1)',pointPlacement:0,animation:false,stack:'visits',},{name:'Placeholder',color:'rgba(255,255,255,0)',animation:false,enableMouseTracking:false,stack:'none'}]};function numberWithCommas(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");}function renderChart(data){var others=[];var coaches=[];var players=[];var days=[];var visits=0;var daily=0;var period=0;var maximum=1;var range=14;var chart=$('#stats_chart').highcharts();if(data.length>0){for(var i=Math.max(0,data.length-range);i<data.length;i++){others.push([data[i][0],data[i][1]]);players.push([data[i][0],data[i][2]]);coaches.push([data[i][0],data[i][3]]);days.push([data[i][0],0]);daily=data[i][1]+data[i][2]+data[i][3];visits+=daily;maximum=Math.max(maximum,daily);period++;}}else{var day=new Date();day.setHours(0,0,0,0);for(var i=0;i<range;i++){var x=day.getTime();others.unshift([x,0]);players.unshift([x,0]);coaches.unshift([x,0]);days.unshift([x,0]);period++;day.setDate(day.getDate()-1);}}if(maximum>5)maximum=Math.floor(1+maximum/5)*5;else maximum+=1;$('#stats_message').html('Your player profile had <b>'+numberWithCommas(visits)+' visits</b> over this <b>2 week</b> period');chart.series[0].setData(coaches,false);chart.series[1].setData(players,false);chart.series[2].setData(others,false);chart.series[3].setData(days,false);chart.yAxis[0].setExtremes(0,maximum,true,false);}$(document).ready(function(){if((typeof auth_token=='string')&&(auth_token!='')){console.log(auth_token);if($('#stats_chart').length==1){$.ajax({url:'https:\/\/aws.tennisrecruiting.net/players/'+resrc_id+'/stats?data=chart&cb='+session_id,type:'GET',dataType:'json',headers:{Authorization:'Bearer '+auth_token},success:function(data,textStatus,xhr){console.log(data);statistics=data.statistics;if(data.session!=session_id){console.log('data\'s session does not match expectation');}else if(!statistics){console.log('data\'s format does not match expectation');}else{Highcharts.chart('stats_chart',statsChart);renderChart(statistics.chart);}},error:function(xhr,textStatus,errorThrown){if(errorThrown){console.log(errorThrown);}if(typeof xhr=='object'){console.log(xhr.status);if(xhr.responseJSON&&xhr.responseJSON.message)console.log(xhr.responseJSON.message);else console.log(xhr.responseText);}}});}}});